<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¯å¼æ±‚ç”Ÿæ¬²å¤§ä½œæˆ°ï¼šè®€æ‡‚å¥¹çš„å¿ƒ</title>
    <style>
        :root {
            --primary-color: #ff6b81;
            --secondary-color: #ff9eb5;
            --bg-gradient: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            --glass-bg: rgba(255, 255, 255, 0.85);
            --glass-border: 1px solid rgba(255, 255, 255, 0.4);
            --text-color: #333;
            --chat-bg-her: #fff;
            --chat-bg-me: #dcf8c6;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-color);
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .game-container {
            width: 90%;
            max-width: 500px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            border: var(--glass-border);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 80vh;
            position: relative;
        }

        /* Header */
        .header {
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            text-align: center;
            border-bottom: 1px solid #eee;
            z-index: 10;
        }

        .header h1 {
            margin: 0;
            font-size: 1.2rem;
            color: var(--primary-color);
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.9rem;
            color: #666;
        }

        /* Screens */
        .screen {
            flex: 1;
            padding: 20px;
            display: none;
            flex-direction: column;
            overflow-y: auto;
        }

        .screen.active {
            display: flex;
        }

        /* Start Screen */
        #start-screen {
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .hero-img {
            font-size: 5rem;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 20px;
            width: 100%;
            font-weight: bold;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 129, 0.4);
        }

        /* Game Screen */
        .chat-box {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }

        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 15px;
            line-height: 1.4;
            position: relative;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.her {
            align-self: flex-start;
            background: var(--chat-bg-her);
            border-bottom-left-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .message.her::before {
            content: 'ğŸ‘§ğŸ» BB';
            position: absolute;
            top: -20px;
            left: 0;
            font-size: 0.8rem;
            color: #888;
        }

        .message.me {
            align-self: flex-end;
            background: var(--chat-bg-me);
            border-bottom-right-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .scene-desc {
            background: rgba(0,0,0,0.05);
            padding: 10px;
            border-radius: 8px;
            font-size: 0.9rem;
            color: #555;
            margin-bottom: 15px;
            text-align: center;
            border: 1px dashed #ccc;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }

        .option-btn {
            background: white;
            color: #333;
            border: 2px solid #eee;
            padding: 15px;
            border-radius: 12px;
            text-align: left;
            margin: 0;
            transition: all 0.2s;
        }

        .option-btn:hover {
            border-color: var(--primary-color);
            background: #fff0f3;
            transform: none;
        }

        /* Feedback Modal/Overlay */
        .feedback-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
            padding: 20px;
            box-sizing: border-box;
        }

        .feedback-card {
            background: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 300px;
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .score-change {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .score-plus { color: #4caf50; }
        .score-minus { color: #f44336; }

        /* Result Screen */
        .result-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
        }

        .final-score {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .rank-badge {
            display: inline-block;
            padding: 5px 15px;
            background: #333;
            color: white;
            border-radius: 20px;
            margin-bottom: 15px;
        }

    </style>
</head>
<body>

<div class="game-container">
    <div class="header">
        <h1>ğŸ’– æ¸¯å¼æ±‚ç”Ÿæ¬²æ¸¬è©¦</h1>
        <div class="status-bar">
            <span id="progress-text">Level 1/10</span>
            <span>â¤ï¸ å¥½æ„Ÿåº¦: <b id="score-display">50</b></span>
        </div>
    </div>

    <div id="start-screen" class="screen active">
        <div class="hero-img">ğŸ¤¯</div>
        <h2>ä½ è®€å¾—æ‡‚ã€Œæ¸¯å¥³ã€å—ï¼Ÿ</h2>
        <p>é¦™æ¸¯å¥³ç”Ÿèªªã€Œæ²’äº‹ã€å°±æ˜¯çœŸçš„æ²’äº‹å—ï¼Ÿ<br>èªªã€Œéš¨ä¾¿ã€çœŸçš„å¯ä»¥éš¨ä¾¿å—ï¼Ÿ</p>
        <p style="font-size: 0.9rem; color: #666; margin-top: 20px;">
            âš ï¸ è­¦å‘Šï¼šæœ¬éŠæˆ²åŒ…å«å¤§é‡é™·é˜±é¡Œã€‚<br>
            æ»¿åˆ†100ï¼Œä½æ–¼50åˆ†å°‡è¢«æ°¸ä¹…æ‹‰é»‘ã€‚
        </p>
        <button onclick="game.start()">é–‹å§‹æŒ‘æˆ°</button>
    </div>

    <div id="game-screen" class="screen">
        <div class="scene-desc" id="scene-text">å ´æ™¯åŠ è¼‰ä¸­...</div>
        <div class="chat-box" id="chat-history">
            </div>
        <div class="options-grid" id="options-area">
            </div>
    </div>

    <div id="result-screen" class="screen">
        <div class="result-card">
            <div class="hero-img" id="result-emoji">ğŸ†</div>
            <div class="rank-badge" id="result-title">ç¨±è™Ÿè¨ˆç®—ä¸­</div>
            <div class="final-score" id="final-score-display">0</div>
            <p id="result-comment">è©•èªåŠ è¼‰ä¸­...</p>
        </div>
        <button onclick="game.restart()">é‡æ–°è¿½æ±‚</button>
    </div>

    <div class="feedback-overlay" id="feedback-overlay">
        <div class="feedback-card">
            <div style="font-size: 3rem;" id="fb-emoji">ğŸ¤”</div>
            <h3 id="fb-title">çµæœ</h3>
            <div class="score-change" id="fb-score"></div>
            <p id="fb-text" style="font-size: 0.9rem; color: #555;"></p>
            <button onclick="game.nextQuestion()" style="padding: 10px 20px;">ç¹¼çºŒ</button>
        </div>
    </div>
</div>

<script>
    // éŠæˆ²æ•¸æ“šåº« (Scenario Database)
    const scenarios = [
        {
            scene: "é€±æœ«æ™šé¤æ™‚é–“ï¼Œä½ æƒ³è¨‚é¤å»³ã€‚",
            girl: "BBï¼Œä»Šæ™šé£Ÿå’©å•Šï¼Ÿ",
            options: [
                { text: "ä½ æƒ³é£Ÿå’©ï¼Ÿæˆ‘éƒ½ç„¡æ‰€è¬‚ã€‚", score: -10, feedback: "å¤§å¿Œï¼å°‡å€‹æ³¢æ‹‹è¿”æ¯”ä½¢ï¼Œé¡¯å¾—ä½ å¥½ç„¡ä¸»è¦‹ã€‚", emoji: "ğŸ™„" },
                { text: "å»é£Ÿéº¥ç•¶å‹å•¦ï¼Œæœ€è¿‘æœ‰æ–°åŒ…ã€‚", score: -20, feedback: "æƒ³æ­»ï¼Ÿé€±æœ«ç´€å¿µæ—¥ä½ å¸¶ä½¢é£Ÿè€éº¥ï¼Ÿ", emoji: "ğŸ˜¡" },
                { text: "æˆ‘Bookå’—å°–æ²™å’€å€‹é–“æµ·æ™¯è¥¿é¤ï¼Œä¹‹å¾Œå†å»æµ·æ—è¡Œä¸‹ã€‚", score: 20, feedback: "Perfectï¼æœ‰è¨ˆåŠƒã€æœ‰æ™¯ã€æœ‰æ°£æ°›ã€‚", emoji: "ğŸ¥°" },
                { text: "ä¸å¦‚é£Ÿè­šä»”ï¼Ÿ", score: -5, feedback: "é›–ç„¶ä½¢å¯èƒ½é¾æ„ï¼Œä½†ä»Šæ™šä¿‚ç´„æœƒå•Šå¤§ä½¬ã€‚", emoji: "ğŸ˜" }
            ]
        },
        {
            scene: "ä½¢å‚³å’—ä¸€å¼µè‡ªæ‹æ¯”ä½ ï¼ŒèƒŒæ™¯ä¿‚ç¶­æ¸¯ã€‚",
            girl: "[ç™¼é€äº†ä¸€å¼µè‡ªæ‹åœ–ç‰‡]",
            options: [
                { text: "å“‡ï¼Œå¾Œé¢å€‹å¤œæ™¯å¥½éšå–”ï¼", score: -15, feedback: "ä½ è®šå€‹æ™¯ï¼Ÿå³ä¿‚äººå””éšå•¦ï¼Ÿ", emoji: "ğŸ˜’" },
                { text: "å·²Saveï¼ŒåšWallpaperã€‚", score: 10, feedback: "é›–ç„¶ç‹—è…¿ï¼Œä½†å¥³ä»”å—è½ã€‚", emoji: "ğŸ˜Š" },
                { text: "BBä½ ç˜¦å’—å–ï¼Œæ¢è£™å¥½è¥¯ä½ ï¼Œå‹ä»™æ°£ï¼", score: 20, feedback: "æ»¿åˆ†ç­”æ¡ˆï¼è®šäººç‚ºä¸»ï¼Œç´°ç¯€ç‚ºè¼”ã€‚", emoji: "ğŸ˜" },
                { text: "å¹¾é»å½±æ¶ï¼Ÿå’é»‘å˜…ã€‚", score: -30, feedback: "ç›´ç”·ç™Œæœ«æœŸï¼Œç„¡å¾—æ•‘ã€‚", emoji: "ğŸ’€" }
            ]
        },
        {
            scene: "è¡Œè¡—è¡Œå’—æˆæ—¥ï¼Œä½¢çªç„¶åœä½ã€‚",
            girl: "å”‰ï¼Œéš»è…³å¥½ç—›å‘€... å°é«˜è¸­é‹åˆ®è…³ã€‚",
            options: [
                { text: "éƒ½å«å’—ä½ è‘—æ³¢é‹æ¶å•¦ï¼Œä¿‚è¦è²ªéšã€‚", score: -50, feedback: "è¬›é“ç†ï¼Ÿä½ æƒ³è®Šå–®èº«ç‹—ï¼Ÿ", emoji: "ğŸ¤¬" },
                { text: "å’æˆ‘åœ°æµå€‹åœ°æ–¹åä¸‹ä¼‘æ¯é™£ã€‚", score: 5, feedback: "ä¸éä¸å¤±ï¼Œä½†æœªå¤ ç´°å¿ƒã€‚", emoji: "ğŸ™‚" },
                { text: "å¤šé£²ç†±æ°´ã€‚", score: -100, feedback: "å†è¦‹ã€‚", emoji: "ğŸ‘‹" },
                { text: "(å³åˆ»å»ä¾¿åˆ©åº—è²·è† å¸ƒ) ä¸å¦‚æ›æˆ‘å°æ‹–é‹ï¼Ÿæˆ–è€…æˆ‘æ¹ä½ ï¼Ÿ", score: 20, feedback: "è¡Œå‹•æ´¾æš–ç”·ï¼ŒåŠ åˆ†ï¼", emoji: "ğŸ’–" }
            ]
        },
        {
            scene: "ä½¢ä¿‚å…¬å¸å—å’—æ°£ï¼Œæ‰“æ¯”ä½ è¨´è‹¦ã€‚",
            girl: "æˆ‘è¦ºå¾—å€‹Managerå‹é‡å°æˆ‘å›‰ï¼Œæ˜æ˜ä¿‚HelenåšéŒ¯...",
            options: [
                { text: "å…¶å¯¦å€‹Managerå¯èƒ½åªä¿‚æƒ³å°±äº‹è«–äº‹...", score: -20, feedback: "å””å¥½åˆ†æï¼ä½¢è¦å˜…ä¿‚ç™¼æ´©ï¼", emoji: "ğŸ˜¤" },
                { text: "HelençœŸä¿‚å¥½éä»½ï¼Œé»å¯ä»¥å’æ¶ï¼ä»Šæ™šå¸¶ä½ å»é£Ÿå¥½é‡è£œæ•¸ã€‚", score: 20, feedback: "åŒä»‡æ•µæ„¾ + ç¾é£Ÿå®‰æ’« = æ­£è§£ã€‚", emoji: "ğŸ¥³" },
                { text: "å””å¥½å””é–‹å¿ƒå•¦ï¼Œå°äº‹é»å§ã€‚", score: -5, feedback: "å°ä½¢é»è¬›å””ä¿‚å°äº‹ï¼", emoji: "ğŸ˜•" },
                { text: "å’ä½ ä¸‹æ¬¡å°å¿ƒå•²å›‰ã€‚", score: -15, feedback: "ä½ ç«Ÿç„¶å¹«ç†ä¸å¹«è¦ªï¼Ÿ", emoji: "ğŸ˜ " }
            ]
        },
        {
            scene: "æƒ…äººç¯€å‰å¤•ï¼Œä½¢åŒä½ è¬›ã€‚",
            girl: "BBå‘€ï¼Œä»Šå¹´æƒ…äººç¯€å””å¥½é€èŠ±å•¦ï¼Œåˆè²´åˆå””å¯¦ç”¨ï¼Œæ›¬éŒ¢ã€‚",
            options: [
                { text: "å¥½å‘€ï¼Œå’æ…³è¿”å•²éŒ¢è²·é«˜é”ã€‚", score: -40, feedback: "ä½ å°±çœŸä¿‚å””è²·ï¼Ÿä½¢å£æ˜¯å¿ƒéæ¶ï¼", emoji: "ğŸ”ª" },
                { text: "æ”¶åˆ°ï¼Œå’æˆ‘åœ°é£Ÿé¤é£¯ç®—ã€‚", score: -10, feedback: "å¤ªè½è©±æœ‰æ™‚éƒ½ä¿‚éŒ¯ã€‚", emoji: "ğŸ˜”" },
                { text: "å‚»è±¬ï¼Œå„€å¼æ„Ÿè¦æœ‰å˜…ã€‚æˆ‘è¨‚å’—ç´°ç´°æŸä½ é¾æ„å˜…ç¹¡çƒèŠ±ã€‚", score: 20, feedback: "è­˜åšï¼è½ä½¢è¬›æ…³éŒ¢ï¼Œä½†åˆè¦æ¯”é©šå–œã€‚", emoji: "ğŸ˜˜" },
                { text: "å’æŠ˜ç¾æ¯”ä½ ï¼Ÿ", score: 5, feedback: "å¯¦éš›ä¿‚å¯¦éš›ï¼Œä½†å¥½ä¼¼æ€ªæ€ªåœ°ã€‚", emoji: "ğŸ¤”" }
            ]
        },
        {
            scene: "ä½ æ‰“æ©Ÿæ‰“åˆ°æœ€ç·Šå¼µå˜…åœ˜æˆ°æ™‚åˆ»ï¼Œä½¢æ‰“é»ã€‚",
            girl: "å–‚ï¼Ÿåšç·Šå’©å‘€ï¼Ÿ",
            options: [
                { text: "(Cutç·š)", score: -200, feedback: "å‹‡å£«ï¼Œä¾†ç”Ÿå†è¦‹ã€‚", emoji: "âš°ï¸" },
                { text: "æ‰“ç·Šæ©Ÿå‘€ï¼Œé™£é–“è¦†ä½ ï¼(æ€¥ä½æ”¶ç·š)", score: -10, feedback: "é›–ç„¶èª å¯¦ï¼Œä½†ä½¢æœƒè¦ºå¾—æ©Ÿé‡è¦éä½¢ã€‚", emoji: "ğŸ˜Ÿ" },
                { text: "ç„¡å‘€ï¼Œè«—ç·Šä½ å›‰ã€‚(ä¸€é‚Šå–®æ‰‹æ“ä½œ)", score: 15, feedback: "é«˜é¢¨éšªé«˜å›å ±ï¼Œå¦‚æœä½ æ“ä½œåˆ°å˜…è©±ã€‚", emoji: "ğŸ˜" },
                { text: "æ¥é›»è©±ï¼šBBç­‰ç­‰å‘€ï¼Œæˆ‘è™•ç†ç·Šå•²æ€¥äº‹ï¼Œ5åˆ†é˜å¾Œå³åˆ»æ‰“æ¯”ä½ ï¼", score: 10, feedback: "ç·©å…µä¹‹è¨ˆï¼Œæœ€å¥½çœŸä¿‚5åˆ†é˜ã€‚", emoji: "ğŸ‘Œ" }
            ]
        },
        {
            scene: "ä½¢è©¦ç·Šè¡«ï¼Œå•ä½ æ„è¦‹ã€‚",
            girl: "å‘¢ä»¶è¡«æœƒå””æœƒé¡¯å¾—æˆ‘å¥½è‚¥ï¼Ÿ",
            options: [
                { text: "å°‘å°‘å•¦ï¼Œå¯èƒ½é»‘è‰²å€‹ä»¶å¥½å•²ã€‚", score: -30, feedback: "èª å¯¦è±†æ²™åŒ…é£Ÿå¤šå’—ï¼Ÿ", emoji: "ğŸ¤" },
                { text: "å””æœƒå‘€ï¼Œä½ æœ¬èº«éƒ½å””è‚¥ã€‚", score: 5, feedback: "æ¨™æº–ç­”æ¡ˆï¼Œä½†æœ‰å•²æ•·è¡ã€‚", emoji: "ğŸ˜" },
                { text: "é‚Šåº¦è‚¥ï¼Ÿæˆ‘è¦ºå¾—é¡¯å¾—ä½ å¥½æœ‰ç·šæ¢ï¼Œå€‹è…°ä½å¥½éšã€‚", score: 20, feedback: "å…·é«”è®šè³ï¼Œé¿é‡å°±è¼•ã€‚", emoji: "âœ¨" },
                { text: "è‚¥è‚¥åœ°å¹¾å¯æ„›å‘€ã€‚", score: -50, feedback: "å¥³ä»”æœ€æ€•è½åˆ°å€‹è‚¥å­—ï¼", emoji: "ğŸ·" }
            ]
        },
        {
            scene: "ç¶“éç å¯¶åº—ï¼Œä½¢æœ›ä½å€‹æ«¥çª—ã€‚",
            girl: "å“‡ï¼Œæ¢é ¸éˆå¥½éšå‘€...",
            options: [
                { text: "è¡Œå•¦ï¼Œè¶•æ™‚é–“å‘€ã€‚", score: -20, feedback: "å®Œå…¨ç„¡è¦–ä½¢å˜…éœ€æ±‚ã€‚", emoji: "ğŸš¶" },
                { text: "å¹¾åƒèšŠè²·èˆŠçŸ³ï¼Œå””æŠµã€‚", score: -15, feedback: "ç ´å£æ°£æ°›é«˜æ‰‹ã€‚", emoji: "ğŸ™…â€â™‚ï¸" },
                { text: "è¨˜ä½å€‹æ¬¾ï¼Œä¸‹æ¬¡ç´€å¿µæ—¥é€æ¯”ä½¢ã€‚", score: 20, feedback: "é›–ç„¶ç¾åœ¨ç„¡é‡ç™¼ç”Ÿï¼Œä½†ä½ è´åœ¨æœªä¾†ã€‚", emoji: "ğŸ“" },
                { text: "éšä¿‚éšï¼Œä¸éæˆ‘è¦ºå¾—ä½ æˆ´ä¸Šæ¬¡æˆ‘é€å€‹æ¢å†è¥¯å•²ã€‚", score: 15, feedback: "è®šç¾åŒæ™‚çœéŒ¢ï¼Œé«˜æ‰‹ã€‚", emoji: "ğŸ˜" }
            ]
        },
        {
            scene: "ä½¢å‰ªå’—é ­é«®ï¼ˆåªä¿‚ä¿®çŸ­å’—1cmï¼‰ï¼Œè¦‹åˆ°ä½ ã€‚",
            girl: "ä½ è¦ºå””è¦ºå¾—æˆ‘æœ‰å’©å””åŒå’—ï¼Ÿ",
            options: [
                { text: "ç„¡å–ï¼Œä¸€æ¨£å’éšã€‚", score: -5, feedback: "æ±‚ç”Ÿæ¬²å¼·ï¼Œä½†è§€å¯ŸåŠ›å¼±ã€‚", emoji: "ğŸ˜‘" },
                { text: "æ›å’—é¦™æ°´ï¼Ÿ", score: -10, feedback: "äº‚ä¼°æœƒæ­»å¾—å¥½æ…˜ã€‚", emoji: "ğŸ¤¥" },
                { text: "ä¿‚å’ªå‰ªå’—é ­é«®ï¼Ÿæ¸…çˆ½å’—å¥½å¤šï¼Œå¥½è¥¯ä½ è‡‰å‹ï¼", score: 20, feedback: "è§€å¯Ÿå…¥å¾®ï¼Œæ»¿åˆ†ç”·å‹ï¼", emoji: "ğŸ’¯" },
                { text: "è‚¥å’—ï¼Ÿ", score: -100, feedback: "è‡ªæ®ºå¼ç™¼è¨€ã€‚", emoji: "â˜ ï¸" }
            ]
        },
        {
            scene: "æœ€å¾Œä¸€é¡Œï¼šå‰åº¦è©±é¡Œã€‚",
            girl: "å…¶å¯¦ä½ è¦ºå¾—ä½ å€‹Exéšå•²å®šæˆ‘éšå•²ï¼Ÿ",
            options: [
                { text: "å„æœ‰å„éšå•¦ã€‚", score: -40, feedback: "æœ€è ¢å˜…ç­”æ¡ˆï¼Œæƒ³å…©é‚Šè¨å¥½ã€‚", emoji: "ğŸ‘" },
                { text: "ç·Šä¿‚ä½ éšå•¦ï¼", score: 10, feedback: "æ¨™æº–ç­”æ¡ˆã€‚", emoji: "ğŸ†—" },
                { text: "é‚Šå€‹Exï¼Ÿæˆ‘å””è¨˜å¾—äº†ã€‚æˆ‘çœ¼ä¸­æ·¨ä¿‚è¦‹åˆ°ä½ ã€‚", score: 20, feedback: "æ»¿åˆ†ï¼å®Œå…¨æŠ¹æ®ºéå»ï¼Œåªå°ˆæ³¨ç¾åœ¨ã€‚", emoji: "ğŸ§ " },
                { text: "ä½¢é›–ç„¶éšï¼Œä½†æ€§æ ¼å·®éä½ ã€‚", score: -20, feedback: "å””å¥½æä½¢éšï¼", emoji: "ğŸš«" }
            ]
        }
    ];

    const Game = {
        score: 50,
        currentLevel: 0,
        
        start: function() {
            this.score = 50;
            this.currentLevel = 0;
            document.getElementById('start-screen').classList.remove('active');
            document.getElementById('result-screen').classList.remove('active');
            document.getElementById('game-screen').classList.add('active');
            this.updateScoreUI();
            this.loadQuestion();
        },

        loadQuestion: function() {
            if (this.currentLevel >= scenarios.length) {
                this.showResult();
                return;
            }

            const data = scenarios[this.currentLevel];
            
            // Update UI
            document.getElementById('progress-text').innerText = `Level ${this.currentLevel + 1}/${scenarios.length}`;
            document.getElementById('scene-text').innerText = `ğŸ“ å ´æ™¯ï¼š${data.scene}`;
            
            // Render Chat
            const chatBox = document.getElementById('chat-history');
            chatBox.innerHTML = `
                <div class="message her">${data.girl}</div>
            `;

            // Render Options
            const optionsArea = document.getElementById('options-area');
            optionsArea.innerHTML = '';
            
            // Shuffle options slightly for randomness (optional)
            const shuffledOptions = [...data.options].sort(() => Math.random() - 0.5);

            shuffledOptions.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = opt.text;
                btn.onclick = () => this.checkAnswer(opt);
                optionsArea.appendChild(btn);
            });
        },

        checkAnswer: function(option) {
            // Update internal score
            this.score += option.score;
            if (this.score > 100) this.score = 100;
            if (this.score < 0) this.score = 0;

            // Show Feedback Overlay
            const overlay = document.getElementById('feedback-overlay');
            const fbEmoji = document.getElementById('fb-emoji');
            const fbTitle = document.getElementById('fb-title');
            const fbScore = document.getElementById('fb-score');
            const fbText = document.getElementById('fb-text');

            fbEmoji.innerText = option.emoji;
            fbText.innerText = option.feedback;

            if (option.score > 0) {
                fbTitle.innerText = "åšå¾—å¥½ï¼";
                fbScore.innerText = "+" + option.score;
                fbScore.className = "score-change score-plus";
                fbTitle.style.color = "#4caf50";
            } else {
                fbTitle.innerText = "å‡ºäº‹å•¦ï¼";
                fbScore.innerText = option.score;
                fbScore.className = "score-change score-minus";
                fbTitle.style.color = "#f44336";
            }

            overlay.style.display = 'flex';
        },

        nextQuestion: function() {
            document.getElementById('feedback-overlay').style.display = 'none';
            this.currentLevel++;
            this.updateScoreUI();
            this.loadQuestion();
        },

        updateScoreUI: function() {
            document.getElementById('score-display').innerText = this.score;
        },

        showResult: function() {
            document.getElementById('game-screen').classList.remove('active');
            document.getElementById('result-screen').classList.add('active');
            
            const scoreDisplay = document.getElementById('final-score-display');
            const resultTitle = document.getElementById('result-title');
            const resultComment = document.getElementById('result-comment');
            const resultEmoji = document.getElementById('result-emoji');

            scoreDisplay.innerText = this.score;

            if (this.score >= 90) {
                resultTitle.innerText = "æƒ…å ´é¬¼è¦‹æ„";
                resultComment.innerText = "å¤§å¸«ï¼è«‹å—å°å¼Ÿä¸€æ‹œï¼ä½ å°æ¸¯å¥³å¿ƒç†å˜…æŒæ¡å·²ç¶“å‡ºç¥å…¥åŒ–ï¼Œç„¡å¥³ä»”é€ƒå¾—å‡ºä½ æ‰‹æŒå¿ƒï¼";
                resultEmoji.innerText = "ğŸ‘‘";
            } else if (this.score >= 70) {
                resultTitle.innerText = "è³‡æ·±æš–ç”·";
                resultComment.innerText = "å””éŒ¯å””éŒ¯ï¼Œå¤§éƒ¨åˆ†æ™‚é–“éƒ½æ±‚ç”ŸæˆåŠŸã€‚ç¹¼çºŒä¿æŒç´°å¿ƒï¼Œå¥½å¿«å¯ä»¥ä¿®æˆæ­£æœã€‚";
                resultEmoji.innerText = "ğŸ’–";
            } else if (this.score >= 50) {
                resultTitle.innerText = "æ™®é€šæœ‹å‹ (Friend Zone)";
                resultComment.innerText = "ä½ ä¿‚å€‹å¥½äººï¼Œä½†æœªå¤ ç´°å¿ƒã€‚ç¶“å¸¸è¸©é›·ï¼Œå°å¿ƒæ¯”äººæ´¾å¥½äººå¡å•Šã€‚";
                resultEmoji.innerText = "ğŸƒ";
            } else {
                resultTitle.innerText = "é‹¼éµç›´ç”·ç™Œ";
                resultComment.innerText = "æ†‘å¯¦åŠ›å–®èº«ï¼ä½ å˜…å›æ‡‰ç°¡ç›´ä¿‚ç½é›£ç´šã€‚å»ºè­°é‡ä¿®èªªè©±æŠ€å·§ï¼Œå¦å‰‡æ³¨å®šå­¤ç¨çµ‚è€ã€‚";
                resultEmoji.innerText = "ğŸš‘";
            }
        },

        restart: function() {
            this.start();
        }
    };

    const game = Object.create(Game);
</script>

</body>
</html>
